(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43a61400"],{"0dae":function(t,e,n){"use strict";var r=n("55bc"),a=n.n(r);a.a},2375:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"bouncing-loader"},[n("div"),n("div"),n("div")])])}],s=(n("0dae"),n("2877")),i={},c=Object(s["a"])(i,r,a,!1,null,"958caafc",null);e["a"]=c.exports},"55bc":function(t,e,n){},9831:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoading?n("Spinner"):[n("router-link",{staticClass:"btn btn-primary mb-4",attrs:{to:"/admin/restaurants/new"}},[t._v(" New Restaurant ")]),n("table",{staticClass:"table"},[n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("#")]),n("th",{attrs:{scope:"col"}},[t._v("Category")]),n("th",{attrs:{scope:"col"}},[t._v("Name")]),n("th",{attrs:{scope:"col",width:"300"}},[t._v("操作")])])]),n("tbody",t._l(t.restaurants,(function(e){return n("tr",{key:e.id},[n("th",{staticClass:"align-middle",attrs:{scope:"row"}},[t._v(t._s(e.id))]),n("td",{staticClass:"align-middle"},[t._v(t._s(e.Category&&e.Category.name))]),n("td",{staticClass:"align-middle"},[t._v(t._s(e.name))]),n("td",{staticClass:"d-flex justify-content-between"},[n("router-link",{staticClass:"btn btn-link",attrs:{to:"/admin/restaurants/"+e.id}},[t._v(" Show ")]),n("router-link",{staticClass:"btn btn-link",attrs:{to:"/admin/restaurants/"+e.id+"/edit"}},[t._v(" Edit ")]),n("button",{staticClass:"btn btn-link",attrs:{disabled:t.isProcessing},on:{click:function(n){return t.deleteRestaurant(e.id)}}},[t._v(" Delete ")])],1)])})),0)])]],2)},a=[],s=(n("4de4"),n("d3b7"),n("96cf"),n("2375")),i=n("be6c"),c=n("2fa3"),u={components:{Spinner:s["a"]},data:function(){return{restaurants:[],isProcessing:!1,isLoading:!0}},created:function(){this.fetchRestaurants()},methods:{fetchRestaurants:function(){var t,e,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(i["a"].restaurants.get());case 3:if(t=r.sent,e=t.data,n=t.statusText,"OK"===n){r.next=8;break}throw"serverError";case 8:this.restaurants=e.restaurants,this.isLoading=!1,r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](0),this.isLoading=!1,c["a"].fire({icon:"error",title:"無法取得餐廳，請稍後再試"});case 16:case"end":return r.stop()}}),null,this,[[0,12]])},deleteRestaurant:function(t){var e,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!this.isProcessing){r.next=3;break}return r.abrupt("return",!1);case 3:return this.isProcessing=!0,r.next=6,regeneratorRuntime.awrap(i["a"].restaurants.delete(t));case 6:if(e=r.sent,n=e.data,"success"===n.status){r.next=10;break}throw"serverError";case 10:this.restaurants=this.restaurants.filter((function(e){return e.id!==t})),this.isProcessing=!1,c["a"].fire("刪除成功","","success"),r.next=19;break;case 15:r.prev=15,r.t0=r["catch"](0),this.isProcessing=!1,c["a"].fire({icon:"error",title:"無法刪除餐廳，請稍後再試"});case 19:case"end":return r.stop()}}),null,this,[[0,15]])}}},o=u,d=n("2877"),l=Object(d["a"])(o,r,a,!1,null,null,null);e["default"]=l.exports},be6c:function(t,e,n){"use strict";var r=n("2fa3");e["a"]={categories:{get:function(){return r["b"].get("/admin/categories")},create:function(t){return r["b"].post("/admin/categories",t)},delete:function(t){return r["b"].delete("/admin/categories/".concat(t))},update:function(t,e){return r["b"].put("/admin/categories/".concat(t),e)}},restaurants:{get:function(){return r["b"].get("/admin/restaurants")},getOne:function(t){return r["b"].get("/admin/restaurants/".concat(t))},create:function(t){return r["b"].post("/admin/restaurants",t)},update:function(t,e){return r["b"].put("/admin/restaurants/".concat(t),e)},delete:function(t){return r["b"].delete("/admin/restaurants/".concat(t))}},users:{get:function(){return r["b"].get("/admin/users")},update:function(t,e){return r["b"].put("/admin/users/".concat(t),{isAdmin:e})}}}}}]);
//# sourceMappingURL=chunk-43a61400.aa3fbf97.js.map