(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-424dc72a"],{"0dae":function(e,t,n){"use strict";var a=n("55bc"),r=n.n(a);r.a},2375:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"bouncing-loader"},[n("div"),n("div"),n("div")])])}],s=(n("0dae"),n("2877")),i={},c=Object(s["a"])(i,a,r,!1,null,"958caafc",null);t["a"]=c.exports},"498a":function(e,t,n){"use strict";var a=n("23e7"),r=n("58a8").trim,s=n("e070");a({target:"String",proto:!0,forced:s("trim")},{trim:function(){return r(this)}})},"55bc":function(e,t,n){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),r=n("5899"),s="["+r+"]",i=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),o=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(c,"")),n}};e.exports={start:o(1),end:o(2),trim:o(3)}},"6b75":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLoading?n("Spinner"):[n("form",{staticClass:"my-4",on:{submit:function(t){return t.preventDefault(),e.createCategory(t)}}},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"col-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newCategory,expression:"newCategory"}],staticClass:"form-control",attrs:{type:"text",placeholder:"New category"},domProps:{value:e.newCategory},on:{input:function(t){t.target.composing||(e.newCategory=t.target.value)}}})]),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-primary"},[e._v("新增")])])])]),n("table",{staticClass:"table"},[n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col",width:"60"}},[e._v("#")]),n("th",{attrs:{scope:"col"}},[e._v("Category Name")]),n("th",{attrs:{scope:"col",width:"210"}},[e._v("Action")])])]),n("tbody",e._l(e.categories,(function(t,a){return n("tr",{key:t.id},[n("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),n("td",{staticClass:"position-relative"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing,expression:"!cate.isEditing"}],staticClass:"category-name"},[e._v(" "+e._s(t.name)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"cate.isEditing"},{name:"model",rawName:"v-model",value:t.name,expression:"cate.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.name},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateCategory(a)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.handleCancel(a)}],input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}}),n("span",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"cate.isEditing"}],staticClass:"cancel",on:{click:function(t){return e.handleCancel(a)}}},[e._v(" ✕ ")])]),n("td",{staticClass:"d-flex justify-content-between"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing,expression:"!cate.isEditing"}],staticClass:"btn btn-link mr-2",on:{click:function(t){return e.toggleIsEditing(a)}}},[e._v(" Edit ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"cate.isEditing"}],staticClass:"btn btn-link mr-2",attrs:{disabled:e.isProcessing},on:{click:function(t){return e.updateCategory(a)}}},[e._v(" Save ")]),n("button",{staticClass:"btn btn-link mr-2",attrs:{disabled:e.isProcessing},on:{click:function(t){return e.deleteCategory(a)}}},[e._v(" Delete ")])])])})),0)])]],2)},r=[],s=(n("4de4"),n("d81d"),n("b0c0"),n("d3b7"),n("498a"),n("96cf"),n("2375")),i=n("be6c"),c=n("2fa3"),o={components:{Spinner:s["a"]},data:function(){return{categories:[],newCategory:"",isProcessing:!1,isLoading:!0}},created:function(){this.fetchCategories()},methods:{fetchCategories:function(){var e,t;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(i["a"].categories.get());case 3:e=n.sent,t=e.data,this.categories=t.categories.map((function(e){return{id:e.id,name:e.name,isEditing:!1}})),this.isLoading=!1,n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),this.isLoading=!1,c["a"].fire({icon:"error",title:"無法取得餐廳分類，請稍後再試"});case 13:case"end":return n.stop()}}),null,this,[[0,9]])},createCategory:function(){var e,t,n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,!this.isProcessing){a.next=3;break}return a.abrupt("return",!1);case 3:if(this.isProcessing=!0,e=this.newCategory.trim(),e){a.next=7;break}throw{msg:"餐廳分類不得為空白"};case 7:return a.next=9,regeneratorRuntime.awrap(i["a"].categories.create({name:e}));case 9:if(t=a.sent,n=t.data,"success"===n.status){a.next=13;break}throw{msg:n.message};case 13:this.categories.push({id:n.categoryId,name:e,isEditing:!1}),this.newCategory="",c["a"].fire("成功建立分類","","success"),this.isProcessing=!1,a.next=23;break;case 19:a.prev=19,a.t0=a["catch"](0),this.isProcessing=!1,c["a"].fire({icon:"error",title:a.t0.msg||"無法建立分類，請稍後再試"});case 23:case"end":return a.stop()}}),null,this,[[0,19]])},deleteCategory:function(e){var t,n,a,r,s;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,!this.isProcessing){o.next=3;break}return o.abrupt("return",!1);case 3:return this.isProcessing=!0,t=this.categories[e],n=t.id,a=t.name,o.next=7,regeneratorRuntime.awrap(i["a"].categories.delete(n));case 7:if(r=o.sent,s=r.data,"success"===s.status){o.next=11;break}throw{msg:s.message};case 11:this.categories=this.categories.filter((function(e){return e.id!==n})),c["a"].fire("成功刪除分類 ".concat(a),"","success"),this.isProcessing=!1,o.next=20;break;case 16:o.prev=16,o.t0=o["catch"](0),this.isProcessing=!1,c["a"].fire({icon:"error",title:o.t0.msg||"無法刪除餐廳，請稍後再試"});case 20:case"end":return o.stop()}}),null,this,[[0,16]])},toggleIsEditing:function(e){var t=this.categories[e];t.isEditing=!t.isEditing,t.nameCached=t.name},updateCategory:function(e){var t,n,a,r,s;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:if(!this.isProcessing){o.next=2;break}return o.abrupt("return",!1);case 2:if(t=this.categories[e],o.prev=3,this.isProcessing=!0,n=t.id,a=t.name,a.trim()){o.next=8;break}throw{msg:"餐廳分類不得為空白"};case 8:return o.next=10,regeneratorRuntime.awrap(i["a"].categories.update(n,{name:a}));case 10:if(r=o.sent,s=r.data,"success"===s.status){o.next=14;break}throw{msg:s.message};case 14:this.toggleIsEditing(e),c["a"].fire("成功更新餐廳分類","","success"),this.isProcessing=!1,o.next=24;break;case 19:o.prev=19,o.t0=o["catch"](3),this.isProcessing=!1,t.name=t.nameCached,c["a"].fire({icon:"error",title:o.t0.msg||"無法更新餐廳分類，請稍後再試"});case 24:case"end":return o.stop()}}),null,this,[[3,19]])},handleCancel:function(e){var t=this.categories[e];t.name=t.nameCached,this.toggleIsEditing(e)}}},u=o,d=(n("9d70"),n("2877")),g=Object(d["a"])(u,a,r,!1,null,"75e4f132",null);t["default"]=g.exports},"9d70":function(e,t,n){"use strict";var a=n("bca2"),r=n.n(a);r.a},b0c0:function(e,t,n){var a=n("83ab"),r=n("9bf2").f,s=Function.prototype,i=s.toString,c=/^\s*function ([^ (]*)/,o="name";!a||o in s||r(s,o,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(e){return""}}})},bca2:function(e,t,n){},be6c:function(e,t,n){"use strict";var a=n("2fa3");t["a"]={categories:{get:function(){return a["b"].get("/admin/categories")},create:function(e){return a["b"].post("/admin/categories",e)},delete:function(e){return a["b"].delete("/admin/categories/".concat(e))},update:function(e,t){return a["b"].put("/admin/categories/".concat(e),t)}},restaurants:{get:function(){return a["b"].get("/admin/restaurants")},getOne:function(e){return a["b"].get("/admin/restaurants/".concat(e))},create:function(e){return a["b"].post("/admin/restaurants",e)},update:function(e,t){return a["b"].put("/admin/restaurants/".concat(e),t)},delete:function(e){return a["b"].delete("/admin/restaurants/".concat(e))}},users:{get:function(){return a["b"].get("/admin/users")},update:function(e,t){return a["b"].put("/admin/users/".concat(e),{isAdmin:t})}}}},d81d:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").map,s=n("1dde");a({target:"Array",proto:!0,forced:!s("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},e070:function(e,t,n){var a=n("d039"),r=n("5899"),s="​᠎";e.exports=function(e){return a((function(){return!!r[e]()||s[e]()!=s||r[e].name!==e}))}}}]);
//# sourceMappingURL=chunk-424dc72a.505d3e0d.js.map