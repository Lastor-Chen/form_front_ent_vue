(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fca9cbfc"],{"0d03":function(t,e,r){var a=r("6eeb"),n=Date.prototype,s="Invalid Date",i="toString",c=n[i],o=n.getTime;new Date(NaN)+""!=s&&a(n,i,(function(){var t=o.call(this);return t===t?c.call(this):s}))},1446:function(t,e,r){"use strict";var a=r("7b2d"),n=r.n(a);n.a},"25f0":function(t,e,r){"use strict";var a=r("6eeb"),n=r("825a"),s=r("d039"),i=r("ad6d"),c="toString",o=RegExp.prototype,u=o[c],d=s((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=c;(d||l)&&a(RegExp.prototype,c,(function(){var t=n(this),e=String(t.source),r=t.flags,a=String(void 0===r&&t instanceof RegExp&&!("flags"in o)?i.call(t):r);return"/"+e+"/"+a}),{unsafe:!0})},"7b2d":function(t,e,r){},8276:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isLoading?r("Spinner"):[r("h1",{staticClass:"mt-5"},[t._v("人氣餐廳")]),r("hr"),t._l(t.restaurants,(function(t){return r("RestaurantTopCard",{key:t.id,attrs:{"initial-restaurant":t}})}))]],2)},n=[],s=(r("d3b7"),r("96cf"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card mb-3 top-card"},[r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("router-link",{attrs:{to:"/restaurants/"+t.restaurant.id}},[r("img",{staticClass:"card-img",attrs:{src:t.restaurant.image}})])],1),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.restaurant.name)+" ")]),r("span",{staticClass:"badge badge-secondary"},[t._v("收藏數："+t._s(t.restaurant.FavoriteCount))]),r("p",{staticClass:"card-text"},[t._v(" "+t._s(t.restaurant.description)+" ")]),r("router-link",{staticClass:"btn btn-primary mr-2",attrs:{to:"/restaurants/"+t.restaurant.id}},[t._v(" Show ")]),t.restaurant.isFavorited?r("button",{staticClass:"btn btn-danger mr-2",attrs:{type:"button"},on:{click:function(e){return t.deleteFavorite(t.restaurant.id)}}},[t._v(" 移除最愛 ")]):r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addFavorite(t.restaurant.id)}}},[t._v(" 加到最愛 ")])],1)])])])}),i=[],c=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("2fa7")),o=r("4cce"),u=r("2fa3");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(c["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var p={props:{initialRestaurant:{type:Object,required:!0}},data:function(){return{restaurant:this.initialRestaurant}},methods:{addFavorite:function(t){var e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(o["a"].addFavorite(t));case 3:if(e=a.sent,r=e.data,"success"===r.status){a.next=7;break}throw"serverError";case 7:this.restaurant=l({},this.restaurant,{isFavorited:!0}),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),u["a"].fire({icon:"error",title:"無法加入最愛，請稍後再試"});case 13:case"end":return a.stop()}}),null,this,[[0,10]])},deleteFavorite:function(t){var e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(o["a"].deleteFavorite(t));case 3:if(e=a.sent,r=e.data,"success"===r.status){a.next=7;break}throw"serverError";case 7:this.restaurant=l({},this.restaurant,{isFavorited:!1}),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),u["a"].fire({icon:"error",title:"無法取消最愛，請稍後再試"});case 13:case"end":return a.stop()}}),null,this,[[0,10]])}}},f=p,b=(r("1446"),r("2877")),v=Object(b["a"])(f,s,i,!1,null,"18f9e278",null),g=v.exports,h=r("2375"),m=r("c4c3"),y={data:function(){return{restaurants:[],isLoading:!0}},components:{RestaurantTopCard:g,Spinner:h["a"]},created:function(){this.fetchTopRestaurants()},methods:{fetchTopRestaurants:function(){var t,e,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(m["a"].getTopRestaurants());case 3:if(t=a.sent,e=t.data,r=t.statusText,"OK"===r){a.next=8;break}throw"serverError";case 8:this.restaurants=e.restaurants,this.isLoading=!1,a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](0),this.isLoading=!1,u["a"].fire({icon:"error",title:"無法取得人氣餐廳，請稍後再試"});case 16:case"end":return a.stop()}}),null,this,[[0,12]])}}},w=y,O=Object(b["a"])(w,a,n,!1,null,null,null);e["default"]=O.exports},ad6d:function(t,e,r){"use strict";var a=r("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c4c3:function(t,e,r){"use strict";r("0d03"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("2b3d");var a=r("2fa3");e["a"]={getRestaurants:function(t){var e=t.page,r=t.categoryId,n=new URLSearchParams({page:e,categoryId:r});return a["b"].get("/restaurants?".concat(n.toString()))},getRestaurant:function(t){return a["b"].get("/restaurants/".concat(t))},getFeeds:function(){return a["b"].get("/restaurants/feeds")},getTopRestaurants:function(){return a["b"].get("/restaurants/top")}}}}]);
//# sourceMappingURL=chunk-fca9cbfc.8f318c2f.js.map